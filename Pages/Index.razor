@page "/"


<PageTitle>Todos</PageTitle>

<h3>Todos</h3>

@if(todos is not null)
{
  <div class="input-group mb-3">
    <input type="text" @bind="@description" class="form-control" placeholder="Enter a to-do description some new new" />
    <button class="btn btn-outline-secondary" @onclick="Add">Add</button>
  </div>

  <ul class="list-group mb-3">
    @foreach (var todo in todos)
    {
      <li class="list-group-item d-flex align-items-center justify-content-between">
      <div>
        <input  id="@todo.Id" type="checkbox" @onchange="@(e => Update(e.Value, todo))" class="form-check-input" checked="@todo.Completed">
        <label for="@todo.Id" class="form-check-label @(todo.Completed ? "completed" : "")" >@todo.Title</label>
      </div>
      <input type="button" value="Delete" class="btn btn-sm btn-outline-danger" @onclick="@(e => Delete(todo))" />
    </li>
    }
  </ul>
}

 
@code {
    string description = string.Empty;
    List<Todo> todos = new() {new Todo {Id = 1, Completed = true, Title = "Todo-1 more interested naming for this todo"}};
    void Update(object completed, Todo todo)
    {
      todo.Completed = (bool)completed;
    }

    void Delete(Todo todo) => todos.Remove(todo);

    void Add(){
      if (description.Length.Equals(0)) return;
      var id = todos.Count().Equals(0) ? 1 : todos.Max(t => t.Id) + 1;
      var todo = new Todo  {Id = id, Completed = false, Title = description};
      todos.Add(todo);
      description = string.Empty;
    }
}
